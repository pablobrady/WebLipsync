/*! WebLipsync 2016-01-20 */
var externalLipsyncData=[[0,0],[1,1],[2,1],[3,1],[4,1],[1,1],[2,1],[2,1],[3,1],[3,1],[3,1],[3,1],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[2,0],[3,0],[3,0],[1,0],[3,0],[6,0],[1,0],[2,0],[3,0],[4,0],[4,0],[3,0],[3,0],[0,0],[1,0],[2,0],[2,0],[1,0],[1,0],[6,0],[6,0],[6,0],[6,0],[0,0],[2,0],[6,0],[6,0],[3,0],[3,0],[3,0],[3,0],[3,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[2,0],[2,0],[3,0],[1,0],[1,0],[4,0],[2,0],[3,0],[0,0],[2,0],[3,0],[4,0],[6,0],[2,0],[2,0],[6,0],[2,0],[3,0],[4,0],[1,0],[1,0],[1,0],[3,0],[3,0],[0,0],[1,0],[0,0],[0,0],[0,0],[6,0],[3,0],[1,0],[1,0],[1,0],[2,0],[3,0],[3,0],[0,0],[0,0],[0,0],[0,0],[4,0],[4,0],[6,0],[2,0],[1,0],[3,0],[0,0],[2,0],[1,0],[1,0],[5,0],[0,0],[4,3],[3,0],[3,0],[3,0],[2,0],[2,0],[6,0],[1,0],[1,0],[3,0],[2,0],[0,0],[6,0],[2,0],[2,0],[3,0],[3,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[4,3],[4,3],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[0,1],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3]];;/*! WebLipsync 2016-01-20 */
var LipSyncManager=function(a){this.currentHeadId=0,this.currentHeadIndex=0,this.lipsyncDataLength=0,this.isAudioLoaded=!1,this.isPlaying=!1,this.initObj||(this.initObj={}),a.hasOwnProperty("canvasId")?this.canvasId=a.canvasId:this.canvasId=this.getDefaults().canvasId,a.hasOwnProperty("spriteSheetFilename")?this.spriteSheetFilename=a.spriteSheetFilename:this.spriteSheetFilename=this.getDefaults().spriteSheetFilename,a.hasOwnProperty("fps")?this.fps=a.fps:this.fps=this.getDefaults().fps,a.hasOwnProperty("phonemes")?this.phonemes=a.phonemes:this.phonemes=this.getDefaults().phonemes,a.hasOwnProperty("headWidth")?this.headWidth=a.headWidth:this.headWidth=this.getDefaults().headWidth,a.hasOwnProperty("headHeight")?this.headHeight=a.headHeight:this.headHeight=this.getDefaults().headHeight,a.hasOwnProperty("spriteSheetWidth")?this.spriteSheetWidth=a.spriteSheetWidth:this.spriteSheetWidth=this.getDefaults().spriteSheetWidth,a.hasOwnProperty("spriteSheetHeight")?this.spriteSheetHeight=a.spriteSheetHeight:this.spriteSheetHeight=this.getDefaults().spriteSheetHeight,a.hasOwnProperty("expressions")?this.expressions=a.expressions:this.expressions=this.getDefaults().expressions,a.hasOwnProperty("audioPlayerId")?this.audioPlayerId=a.audioPlayerId:this.audioPlayerId=this.getDefaults().audioPlayerId,this.audioPlayerElement=document.getElementById(this.audioPlayerId),a.hasOwnProperty("soundFile")?this.soundFile=a.soundFile:(this.soundFile=this.getDefaults().soundFile,console.log("LipSyncManager ERROR:  No soundFile specified.  Using default '"+this.soundFile+"'.")),a.hasOwnProperty("lipsyncData")?this.lipsyncData=a.lipsyncData:(this.lipsyncData=this.getDefaults().lipsyncData,console.log("LipSyncManager ERROR:  No LipsyncData specified.  Using default.")),this.lipsyncDataLength=this.lipsyncData.length,a.hasOwnProperty("headId")?this.headId=a.headId:(this.headId=this.getDefaults().headId,console.log("LipSyncManager ERROR:  No headId specified.  Using default '"+this.headId+"'.")),this.headElement=document.getElementById(this.headId),a.hasOwnProperty("onReady")?this.onReady=a.onReady:(this.onReady=this.getDefaults().onReady,console.log("LipSyncManager WARNING:  No 'onReady' function specified.")),console.log("LipSyncManager::getDefaults() = "+this.canvasId),console.log("LipSyncManager::fps = "+Number(this.fps)),console.log("LipSyncManager::phonemes = "+Number(this.phonemes)),console.log("LipSyncManager::headWidth = "+Number(this.headWidth)),console.log("LipSyncManager::headHeight = "+Number(this.headHeight)),console.log("LipSyncManager::expressions = "+Number(this.expressions)),console.log("LipSyncManager::audioPlayerId = "+this.audioPlayerId),console.log("LipSyncManager::soundFile = "+this.soundFile),console.log("LipSyncManager::lipsyncData = "+this.lipsyncData),console.log("LipSyncManager::headId = "+this.headId),this.loadAudio(this.soundFile)};LipSyncManager.prototype.getDefaults=function(){return console.log("getDefault arrival."),{canvasId:"cartoonCanvas",spriteSheetFilename:"images/ali_front_faces.png",fps:12,phonemes:6,headWidth:200,headHeight:175,spriteSheetWidth:1400,spriteSheetHeight:700,expressions:0,audioPlayerId:"audioPlayerId",soundFile:"audio/defaultAudio.mp3",lipsyncData:[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[6,0],[0,1],[1,1],[2,1],[3,1],[4,1],[5,1],[6,1],[6,1],[0,2],[1,2],[2,2],[3,2],[4,2],[5,2],[6,2],[6,2]],headId:"headId",onReady:function(a){console.log("Default onReady callback!  Will play ASAP.")}}},LipSyncManager.prototype.loadAudio=function(a){console.log("MP3 Audio:  "+a);var b=a.replace(".mp3",".ogg");document.getElementById("mp3Source").src=a,document.getElementById("oggSource").src=b;var c=this;return this.audioPlayerElement.addEventListener("canplaythrough",function(){c.isAudioLoaded=!0,console.log("CanPlayThru done!  this.isAudioLoaded = "+c.isAudioLoaded)}),this.audioPlayerElement.load(),!0},LipSyncManager.prototype.play=function(){this.isAudioLoaded&&(this.isPlaying?this.stop():(this.audioPlayerElement.play(),this.isPlaying=!0,this.currentHeadIndex=0,this.currentHeadId=0,this.startTimerTick()))},LipSyncManager.prototype.stop=function(){this.isAudioLoaded&&(clearTimeout(window.lipsyncManagerTimeout),this.audioPlayerElement.pause(),this.audioPlayerElement.currentTime=0,this.isPlaying=!1,this.currentHeadIndex=0,this.currentHeadId=0)},LipSyncManager.prototype.startTimerTick=function(){clearTimeout(window.lipsyncManagerTimeout);var a=this;window.lipsyncManagerTimeout=setTimeout(a.updateTimedHeadIndex.bind(a),1e3/this.fps)},LipSyncManager.prototype.updateTimedHeadIndex=function(){return this.currentHeadIndex=this.currentHeadIndex+1,this.currentHeadIndex>=this.lipsyncDataLength?void this.stop():void this.startTimerTick()},LipSyncManager.prototype.getCurrentHeadId=function(){return this.currentHeadIndex>=this.lipsyncDataLength?this.lipsyncData[0][0]:this.lipsyncData[this.currentHeadIndex][0]},LipSyncManager.prototype.getCurrentExpressionId=function(){return this.currentHeadIndex>=this.lipsyncDataLength?this.lipsyncData[0][1]:this.lipsyncData[this.currentHeadIndex][1]};