/*! WebLipsync 2016-01-22 */
window.lipsyncSpeed=1,window.lipsyncEnum={},window.lipsyncEnum.spriteType={LIPSYNCED:1,STATIC:2},window.globalAppSettings={aliHead_x:375,aliHead_y:80,aliBody_x:300,aliBody_y:60,aliBody_width:481,aliBody_height:629,cartoonCanvasWidth:1e3,cartoonCanvasHeight:750};var lipsMgr=new LipSyncManager({canvasId:"cartoonCanvas",spriteSheetFilename:"images/ali_front_faces.png",fps:12,phonemes:6,headWidth:200,headHeight:175,spriteSheetWidth:1400,spriteSheetHeight:700,expressions:0,audioPlayerId:"audioPlayerId",soundFile:"audio/ali_intro.mp3",lipsyncData:externalLipsyncData,headId:"aliHead-01"});document.querySelector("#stopButton").addEventListener("click",function(){lipsMgr.stop()}),document.querySelector("#playButton").addEventListener("click",function(){lipsMgr.play()}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),function(){function a(){window.requestAnimationFrame(a),e.update(),c.render(),e.render()}function b(a){var b={},c=0,d=0,e=a.ticksPerFrame||0,f=a.numberOfFrames||1;return b.spriteType=a.spriteType,b.context=a.context,b.width=a.width,b.height=a.height,b.image=a.image,b.update=function(){b.spriteType==window.lipsyncEnum.spriteType.LIPSYNCED&&(d+=1,d>e&&(d=0,f-1>c?c+=1:c=0))},b.render=function(){a.spriteType===window.lipsyncEnum.spriteType.STATIC?(b.context.clearRect(0,0,window.globalAppSettings.cartoonCanvasWidth,window.globalAppSettings.cartoonCanvasWidth),b.context.drawImage(b.image,0,0,window.globalAppSettings.aliBody_width,window.globalAppSettings.aliBody_height,window.globalAppSettings.aliBody_x,window.globalAppSettings.aliBody_y,window.globalAppSettings.aliBody_width,window.globalAppSettings.aliBody_height)):a.spriteType===lipsyncEnum.spriteType.LIPSYNCED&&b.context.drawImage(b.image,Number(lipsMgr.getCurrentHeadId())*lipsMgr.headWidth,Number(lipsMgr.getCurrentExpressionId())*lipsMgr.headHeight,lipsMgr.headWidth,lipsMgr.headHeight,window.globalAppSettings.aliHead_x,window.globalAppSettings.aliHead_y,lipsMgr.headWidth,lipsMgr.headHeight)},b}var c,d,e,f,g;g=document.getElementById("cartoonCanvas"),g.width=1e3,g.height=750,d=new Image,d.src="images/ali_body.png",c=b({spriteType:window.lipsyncEnum.spriteType.STATIC,context:g.getContext("2d"),width:1400,height:700,image:d,numberOfFrames:1,ticksPerFrame:0}),f=new Image,f.addEventListener("load",a),f.src="images/ali_front_faces.png",e=b({spriteType:window.lipsyncEnum.spriteType.LIPSYNCED,context:g.getContext("2d"),width:1400,height:700,image:f,numberOfFrames:lipsMgr.phonemes,ticksPerFrame:4})}();